{% extends "base.html" %}
{% load media %}
{% block title %}N-PACT - N-Profile Analysis Computational Tool{% endblock %}

{% block addScript %}
  {% include_media 'jquery.js' %}
  {% include_media 'processing.js' %}

  <style>
    #progress .ready { display:none; }
    span.ui-icon { float:left; margin-right: .3em;}
    #progress h3 + div { padding-left: 16px; }
    #timer {margin: 10px 0;}
  </style>
{% endblock addScript %}

{% block content %}
<h2 id="title">N-PACT Is Running</h2>

<div id="progress" class="contentPadding">

  <div id="results" style="display:none">
    <h3><span class="ui-icon ui-icon-triangle-1-e">Collapse</span> Results </h3>
    <div style="display:none">
      <h4>Download</h4>
      <div class="ui-state-highlight">
        <div class="ui-icon ui-icon-info" style="float:left;" ></div>
        <p>
          Your download should start shortly. 
          If it does not, here is <a id="downloadlink" href="#">the direct link</a>.
        </p>
      </div>
      <h4>Not what you expected?</h4>
      <ul>
        <li><a id="reconfigurelink" href="#">Reconfigure it</a> and try again.</li>
        <li><a href="{% url start %}">Start Over</a></li>
      </ul>
    </div>
  </div>

  
  <h3 id="progressreport" >
    <span class="ui-icon ui-icon-triangle-1-e ui-icon-triangle-1-s">Collapse</span> Status </h3>
  <div>
    <div id="computationerred" class="ui-state-error ui-corner-all" style="display:none">
      <p>
        <span style="" class="ui-icon ui-icon-alert"></span>
        There was an error. You can click refresh to try again or return to the <a href="{% url start %}">start</a>.
      </p>
    </div>

    <div id="computationrunning" class="ui-state-highlight">
      <div class="ui-icon ui-icon-info" style="float:left;" ></div>
      <p>The computation is currently running.</p>
    </div>
    <div id="timer" style="display:none" class="ui-state-highlight">
      Time Running: <span></span>
    </div>
    
    <div> 
      <h4>Current Progress</h4>
      <ul id="steps"></ul>
      <h4>Intermediate results</h4>
      <ul id="files"></ul>
    </div>
  </div>
  <script type="text/javascript">
    jQuery(document).ready( function(){ 
      progress.init("{{ path }}"); 
    });
  </script>
</div>
{%endblock content %}
